<script>
    function openSystem() {
        const baseUrl = window.location.href.split('launch.html')[0] + 'NautilusOS-OneFile/';
        
        fetch(baseUrl + 'index.html') 
            .then(r => r.text())
            .then(html => {
                var win = window.open('about:blank', '_blank');
                if (win) {
                    // This version tells the browser to find everything in the same folder
                    // by removing the folder prefixes (js/, uv/, css/) from the code
                    let fixedHtml = html.replace('<head>', `<head><base href="${baseUrl}">`);
                    
                    fixedHtml = fixedHtml.replaceAll('src="js/', 'src="');
                    fixedHtml = fixedHtml.replaceAll('href="css/', 'href="');
                    fixedHtml = fixedHtml.replaceAll('src="uv/', 'src="');
                    fixedHtml = fixedHtml.replaceAll('href="uv/', 'href="');

                    win.document.open();
                    win.document.write(fixedHtml);
                    win.document.close();
                    
                    win.focus();
                    window.location.replace("https://www.google.com");
                }
            });
    }
</script>
